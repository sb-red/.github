# SoftGate – EC2 上で動くサーバレス風コードランナー

## プロジェクト概要

SoftGate は、ハッカソンテーマ「サーバレス方式を EC2/Compute Engine 上で自前実装する」を前提にした **サーバ基盤コードランナー** です。

- Postman のようにブラウザからリクエストを送りつつ  
- 10 個のプログラミング言語を選択してコードを実行し  
- 標準出力・エラーログ・実行履歴をワンストップで確認できる

という開発体験を、すべて **EC2 上のコンテナ** で実現しています。

サーバレスそのものを「利用する」だけではなく、  
**サーバレスっぽい動作をインフラから作ってみる**ことを目的とした学習・実験向けプロジェクトです。

---

## 主要機能

### 1. マルチランタイム・コード実行

- サポート言語（例）
  - Python / Node.js / Java / Kotlin / Swift / Go / PyPy など計 10 言語
- ブラウザ上から
  - 言語選択
  - サンプルコードロード
  - コード編集
  - 実行結果／エラーログ表示  
  までを一画面で完結

### 2. Warm Start ベースの高速レスポンス

- ワーカーコンテナをあらかじめ起動しておく **Warm Start 方式** を採用
  - 実行環境が常に用意されているため、コード実行の初回レスポンスが高速
- トラフィック増加時には **Cold Start** でスケールアウト
  - 新しいコンテナを立ち上げてキューをさばく構成
- 性能を優先した設計としつつ、将来は gVisor などのサンドボックス導入で隔離性を高める方針

### 3. 即時実行 + 予約実行

- 即時実行
  - 画面から「今すぐ」コードを実行し、結果をリアルタイムで取得
- 予約実行
  - 指定した日時にコードを自動実行するスケジューラ機能
  - 実行結果は履歴として保存され、後からログを確認可能

### 4. 観測性ダッシュボード

- サービス全体の状態を一目で把握できるダッシュボード
  - サービスマップ（依存関係・ヘルス）
  - CPU / メモリ / ネットワーク / ディスク
  - レイテンシ・エラー率
  - 日別・サービス別コスト
- 全て **リアルなメトリクス** を使用（モックデータではない）
- AWS X-Ray SDK をミドルウェアとして組み込み
  - リクエストフロー・遅延・エラー頻度・依存サービスを分散トレーシング
  - ボトルネック特定に利用可能

### 5. セキュリティ・監査

- VPC / Subnet / Security Group によるネットワーク分離
- Next.js サーバを **リバースプロキシ** として利用し
  - Client → Next.js Server → Backend という構成で
  - Backend API の URL や内部ロジックが直接クライアントから見えないようにカプセル化
- オープンソースの監査ツールを利用し
  - サーバ内部での設定ファイルアクセスや権限変更など
  - 不審なコマンド検知時に Slack へ即時通知

---

## システムアーキテクチャ

### 全体構成

```txt
ユーザー
  ↓ (HTTPS)
[Frontend (Next.js)]
  - UI: 言語選択、コード編集、実行・予約
  - Backend API のプロキシ
  ↓
[Backend (Go/Fiber)]
  - REST API
  - コード実行リクエスト受付
  - Redis キューへのジョブ投入
  - 実行結果・履歴を RDS に保存
  ↓
[Redis]
  - ジョブキュー
  - 予約実行のスケジューラ

[Worker (各言語コンテナ群)]
  - 言語ごとのランタイムを持つ Docker コンテナ
  - Warm Start で常駐
  - キューからジョブ取得 → コード実行 → 結果を Backend に返却

[PostgreSQL (RDS)]
  - ユーザーのコード/メタデータ
  - 実行ログ・予約情報

[Observability Stack]
  - CloudWatch / X-Ray / Cost Explorer
  - Slack アラート
